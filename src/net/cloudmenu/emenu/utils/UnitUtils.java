/**
 * @(#)UnitUtils.java, Jul 26, 2013. 
 * 
 */
package net.cloudmenu.emenu.utils;

import android.util.DisplayMetrics;
import android.util.TypedValue;

/**
 * @author xuhongfeng
 *
 */
public class UnitUtils {


    public static final long SECOND = 1000;

    public static final long MINUTE = 60 * SECOND;

    public static final long HOUR = 60 * MINUTE;

    public static final long DAY = 24 * HOUR;

    public static final long WEEK = 7 * DAY;

    public static final long BYTE = 1;

    public static final long KBYTE = 1024 * BYTE;

    public static final long MBYTE = 1024 * KBYTE;

    public static final long GBYTE = 1024 * MBYTE;

    public static String getSize(long size) {
        if (size < KBYTE) {
            return size + "B";
        } else if (size < MBYTE) {
            return size / KBYTE + "K";
        } else if (size < GBYTE) {
            return size / MBYTE + "M";
        }
        return size / GBYTE + "GB";
    }

    public static String getSize(long size, int percentage) {
        return getSize(size)
                + (percentage >= 100 ? "" : "  --" + percentage + "%");
    }

    public static double getSizeInMegaByte(long size) {
        return size * 1.0 / MBYTE;
    }

    public static String getSizeInKB(long size) {
        if (size < KBYTE) {
            return size + "B";
        }
        return size / KBYTE + "K";
    }

    public static int getSeconds(long time) {
        return Math.round(((float)time/SECOND));
    }

    public static int getDays(long time) {
        return Math.round(((float)time/DAY));
    }

    public static int getHours(long time) {
        return Math.round(((float)time/HOUR));
    }

    public static int getMinutes(long time) {
        return Math.round(((float)time/MINUTE));
    }

    public static String getDuration(long timeMs) {
        if (timeMs / UnitUtils.DAY > 0) {
            return "days ... !";
        }
        int h = (int) (timeMs / UnitUtils.HOUR);
        int m = (int) ((timeMs % UnitUtils.HOUR) / UnitUtils.MINUTE);
        int s = (int) ((timeMs % UnitUtils.MINUTE) / UnitUtils.SECOND);
        if (h == 0) {
            return toStr(m) + ":" + toStr(s);
        } else {
            return toStr(h) + ":" + toStr(m) + ":" + toStr(s);
        }
    }

    private static String toStr(int x) {
        if (x / 10 == 0) {
            return "0" + x;
        } else {
            return Integer.toString(x);
        }
    }

    public static int dipToPix(int dip, DisplayMetrics dm) {
        return (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dip, dm);
    }

}
